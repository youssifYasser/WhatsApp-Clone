import { Button } from '@mui/material'
import Head from 'next/head'
import styled from 'styled-components'
import CircularProgress from '@mui/material/CircularProgress'
import Image from 'next/image'
import logoImg from '../public/logo.webp'
import { useState } from 'react'
import SignInWithPhone from './SignInWithPhone'

const Login = ({ loading, handleSignInEmail, setLoadApp }) => {
  const [signPhone, setSignPhone] = useState(false)

  const handleSignInPhone = () => {
    setSignPhone(true)
  }
  return (
    <Container
      style={{
        display: 'grid',
        placeItems: 'center',
        height: '100vh',
        background: 'url(/background.webp) no-repeat',
        backgroundSize: 'cover',
      }}
    >
      <Head>
        <title>WhatsApp - Login</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/logo.webp' />
        <meta name='referrer' content='no-referrer' />
      </Head>

      <LoginContainer
        style={{
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          padding: signPhone ? '20px 30px' : '50px',
          backgroundColor: '#111b21',
          gap: '30px',
        }}
      >
        {signPhone ? (
          <SignInWithPhone
            setSignPhone={setSignPhone}
            setLoadApp={setLoadApp}
          />
        ) : (
          <>
            <LogoImg
              src={logoImg}
              width={250}
              height={250}
              alt='WhatsApp logo'
            />
            {loading ? (
              <CircularProgress color='success' />
            ) : (
              <ButtonContainer>
                <SignInButton onClick={handleSignInEmail} variant='outlined'>
                  Sign in with Google
                </SignInButton>
                <SignInButton onClick={handleSignInPhone} variant='outlined'>
                  Sign in with Phone number
                </SignInButton>
              </ButtonContainer>
            )}
          </>
        )}
      </LoginContainer>
    </Container>
  )
}

export default Login

const Container = styled.div``

const LoginContainer = styled.main`
  border-radius: 5px;
  box-shadow: 0 4px 14px -3px #111b21;
`

const LogoImg = styled(Image)`
  object-fit: contain;
  width: 200px;
  height: 200px;
  @media (min-width: 640px) {
    width: 250px;
    height: 250px;
  }
`

const SignInButton = styled(Button)`
  color: #aebac1;
  font-weight: 700;
  border-color: #aebac1;
  &:hover {
    border-color: #8696a0;
    background-color: #8696a0;
    color: #111b21;
  }
`
const ButtonContainer = styled.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
`
